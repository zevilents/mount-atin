-- // Load Rayfield UI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- // Window
local Window = Rayfield:CreateWindow({
   Name = "Custom Hub",
   Icon = 0,
   LoadingTitle = "Rayfield Hub",
   LoadingSubtitle = "Final Build",
   Theme = "Default",
   DisableRayfieldPrompts = false,
   ToggleUIKeybind = "K"
})

-------------------------------------------------
-- Tabs
-------------------------------------------------
local PlayerTab = Window:CreateTab("Player", 4483362458)
local TeleportTab = Window:CreateTab("Teleport", 4483362458)
local ServerTab = Window:CreateTab("Server", 4483362458)
local TrollTab = Window:CreateTab("Troll", 4483362458)

-------------------------------------------------
-- Player Features
-------------------------------------------------
-- WalkSpeed
local WalkSpeedSlider = PlayerTab:CreateSlider({
   Name = "WalkSpeed",
   Range = {16, 200},
   Increment = 1,
   Suffix = "speed",
   CurrentValue = 16,
   Callback = function(v)
      if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
         LocalPlayer.Character.Humanoid.WalkSpeed = v
      end
   end
})

-- JumpPower
local JumpSlider = PlayerTab:CreateSlider({
   Name = "JumpPower",
   Range = {50, 300},
   Increment = 5,
   Suffix = "power",
   CurrentValue = 50,
   Callback = function(v)
      if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
         LocalPlayer.Character.Humanoid.JumpPower = v
      end
   end
})

-- Infinite Jump
local InfiniteJump = false
PlayerTab:CreateToggle({
   Name = "Infinite Jump",
   CurrentValue = false,
   Callback = function(v) InfiniteJump = v end
})
game:GetService("UserInputService").JumpRequest:Connect(function()
   if InfiniteJump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
      LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
   end
end)

-- Noclip
local noclip = false
PlayerTab:CreateToggle({
   Name = "Noclip",
   CurrentValue = false,
   Callback = function(v) noclip = v end
})
RunService.Stepped:Connect(function()
   if noclip and LocalPlayer.Character then
      for _, p in pairs(LocalPlayer.Character:GetDescendants()) do
         if p:IsA("BasePart") then
            p.CanCollide = false
         end
      end
   end
end)

-- Reset
PlayerTab:CreateButton({
   Name = "Reset Speed & Jump",
   Callback = function()
      if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
         LocalPlayer.Character.Humanoid.WalkSpeed = 16
         LocalPlayer.Character.Humanoid.JumpPower = 50
         WalkSpeedSlider:Set(16)
         JumpSlider:Set(50)
      end
   end
})

-------------------------------------------------
-- Teleport Features
-------------------------------------------------
-- Teleport to Player
local selectedPlayer = nil
local TpDropdown = TeleportTab:CreateDropdown({
   Name = "Select Player",
   Options = {},
   CurrentOption = "",
   Callback = function(opt) selectedPlayer = opt end
})

local function RefreshPlayers()
   TpDropdown:Clear()
   for _, plr in ipairs(Players:GetPlayers()) do
      if plr ~= LocalPlayer then
         TpDropdown:Add(plr.Name)
      end
   end
end
RefreshPlayers()
Players.PlayerAdded:Connect(RefreshPlayers)
Players.PlayerRemoving:Connect(RefreshPlayers)

TeleportTab:CreateButton({
   Name = "Teleport to Player",
   Callback = function()
      if selectedPlayer then
         local target = Players:FindFirstChild(selectedPlayer)
         if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character:MoveTo(target.Character.HumanoidRootPart.Position + Vector3.new(3,0,3))
         end
      end
   end
})

-- Teleport ke Pos
local PosList = {
   ["Pos 1"] = Vector3.new(5, 12, -404),
   ["Pos 2"] = Vector3.new(-184, 128, 408),
   ["Pos 3"] = Vector3.new(-166, 229, 652),
   ["Puncak"] = Vector3.new(781, 2163, 3921),
}
local selectedPos = nil
local PosDropdown = TeleportTab:CreateDropdown({
   Name = "Select Pos",
   Options = {},
   CurrentOption = "",
   Callback = function(opt) selectedPos = PosList[opt] end
})
for posName, _ in pairs(PosList) do
   PosDropdown:Add(posName)
end
TeleportTab:CreateButton({
   Name = "Teleport ke Pos",
   Callback = function()
      if selectedPos then
         LocalPlayer.Character:MoveTo(selectedPos)
      end
   end
})

-------------------------------------------------
-- Server Features
-------------------------------------------------
ServerTab:CreateButton({
   Name = "Rejoin Server",
   Callback = function()
      TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
   end
})
ServerTab:CreateButton({
   Name = "Server Hop",
   Callback = function()
      TeleportService:Teleport(game.PlaceId, LocalPlayer)
   end
})

-------------------------------------------------
-- Troll Features (Aura Fling)
-------------------------------------------------
local flingEnabled = false
local flingRadius = 15
local flingForce = 200

TrollTab:CreateSlider({
   Name = "Aura Fling Radius",
   Range = {5, 60},
   Increment = 1,
   CurrentValue = flingRadius,
   Suffix = "studs",
   Callback = function(v) flingRadius = v end
})
TrollTab:CreateToggle({
   Name = "Enable Aura Fling",
   CurrentValue = false,
   Callback = function(v) flingEnabled = v end
})

RunService.Heartbeat:Connect(function()
   if flingEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
      local root = LocalPlayer.Character.HumanoidRootPart
      for _, plr in ipairs(Players:GetPlayers()) do
         if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local tr = plr.Character.HumanoidRootPart
            if (tr.Position - root.Position).Magnitude <= flingRadius then
               local dir = (tr.Position - root.Position).Unit
               root.Velocity = dir * flingForce
               root.RotVelocity = Vector3.new(0, 50, 0)
            end
         end
      end
   end
end)
