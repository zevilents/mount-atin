local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

if playerGui:FindFirstChild("WaypointGUI") then
	playerGui.WaypointGUI:Destroy()
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "WaypointGUI"
screenGui.Parent = playerGui

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 240, 0, 50)
button.Position = UDim2.new(0.5, -120, 0.2, 0)
button.Text = "Waypoint Jalan POS 2 → POS 3"
button.BackgroundColor3 = Color3.fromRGB(70, 130, 255)
button.TextColor3 = Color3.new(1, 1, 1)
button.Font = Enum.Font.SourceSansBold
button.TextSize = 18
button.Parent = screenGui

-- Lokasi (contoh waypoint, ganti sesuai jalur nyata di mapmu)
local pos2 = Vector3.new(-184, 128, 408)
local pos3 = Vector3.new(-166, 229, 652)

local waypoints = {
	pos2, -- mulai dari pos2
	Vector3.new(-170, 150, 500), -- titik tengah (misalnya dasar tangga)
	Vector3.new(-170, 200, 600), -- titik berikutnya (atas tangga)
	pos3  -- tujuan akhir
}

-- Fungsi untuk jalanin humanoid ke tiap waypoint
local function walkWaypoints(points)
	local char = player.Character or player.CharacterAdded:Wait()
	local humanoid = char:WaitForChild("Humanoid")
	local hrp = char:WaitForChild("HumanoidRootPart")

	-- teleport dulu ke titik pertama (pos2)
	hrp.CFrame = CFrame.new(points[1])
	task.wait(1)

	for i = 2, #points do
		local target = points[i]
		print("➡️ Jalan ke:", target)
		humanoid:MoveTo(target)
		local reached = humanoid.MoveToFinished:Wait(5)

		-- kalau gagal sampai, coba lompat + ulang
		if not reached then
			humanoid.Jump = true
			humanoid:MoveTo(target)
			humanoid.MoveToFinished:Wait(5)
		end
	end

	print("✅ Sampai di tujuan akhir!")
end

button.MouseButton1Click:Connect(function()
	walkWaypoints(waypoints)
end)
