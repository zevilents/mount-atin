local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

if playerGui:FindFirstChild("RecordPathGUI") then
	playerGui.RecordPathGUI:Destroy()
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RecordPathGUI"
screenGui.Parent = playerGui

-- Buat tombol helper
local function makeButton(text, y, callback)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(0, 240, 0, 40)
	button.Position = UDim2.new(0.5, -120, 0.2, y)
	button.Text = text
	button.BackgroundColor3 = Color3.fromRGB(70, 130, 255)
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.SourceSansBold
	button.TextSize = 18
	button.Parent = screenGui
	button.MouseButton1Click:Connect(callback)
	return button
end

-- Data record
local recording = false
local pathPoints = {}

-- Start Record
makeButton("üî¥ Start Record", 0, function()
	recording = true
	pathPoints = {}
	print("üé• Mulai rekam path...")
end)

-- Stop Record
makeButton("‚èπ Stop Record", 50, function()
	recording = false
	print("üõë Stop rekam. Total titik:", #pathPoints)
	for i, p in ipairs(pathPoints) do
		print(i, p)
	end
end)

-- Play Path
makeButton("‚ñ∂Ô∏è Play Path", 100, function()
	if #pathPoints < 2 then
		warn("‚ö†Ô∏è Path kosong atau terlalu pendek!")
		return
	end

	local char = player.Character or player.CharacterAdded:Wait()
	local humanoid = char:WaitForChild("Humanoid")

	for i = 2, #pathPoints do
		local target = pathPoints[i]
		print("‚û°Ô∏è Jalan ke:", target)
		humanoid:MoveTo(target)
		local reached = humanoid.MoveToFinished:Wait(5)
		if not reached then
			humanoid.Jump = true
			humanoid:MoveTo(target)
			humanoid.MoveToFinished:Wait(5)
		end
	end
	print("‚úÖ Sampai tujuan akhir")
end)

-- Loop untuk merekam posisi
task.spawn(function()
	while true do
		task.wait(0.5) -- ambil titik tiap 0.5 detik (bisa diubah)
		if recording then
			local char = player.Character
			if char and char:FindFirstChild("HumanoidRootPart") then
				local pos = char.HumanoidRootPart.Position
				table.insert(pathPoints, pos)
				print("üìç Rekam titik:", pos)
			end
		end
	end
end)
